(()=>{"use strict";const e=({timing:e,draw:t,duration:o})=>{let n=performance.now();requestAnimationFrame((function r(s){let a=(s-n)/o;a>1&&(a=1);let l=e(a);t(l),a<1&&requestAnimationFrame(r)}))},t={user_phone:e=>{let t;return t=/^[\d\+][\d\(\)\ -]{4,14}\d$/g.test(e.value)&&""!==e.value?o(e,!1):o(e,!0),t},user_email:e=>{let t;return t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/g.test(e.value)&&""!==e.value?o(e,!1):o(e,!0),t},user_name:e=>{let t;return t=/(^[A-Z]{1}[a-z]{1,14} [A-Z]{1}[a-z]{1,14}$)|(^[А-Я]{1}[а-я]{1,14} [А-Я]{1}[а-я]{1,14}$)/g.test(e.value)&&""!==e.value?o(e,!1):o(e,!0),t},isRus:e=>{let t;return t=/[^а-яА-Я]/g.test(e.value)&&""!==e.value?o(e,!1):o(e,!0),t},isNumber:e=>{/[^\d]/g.test(e.value)||""===e.value?o(e,!0):o(e,!1)}},o=(e,t)=>{const o="bad validation",n="good validation";return!0===t?(e.classList.add("iserror"),e.value=o,setTimeout((()=>{e.value=""}),1e3),console.log(o)):(e.classList.contains("iserror")&&(e.classList.remove("iserror"),console.log(n)),console.log(n)),t},n=(e,t)=>{document.querySelector(`#${r(e)}`).scrollIntoView(t)},r=e=>e.href.split("#").pop(),s=({formId:e,someElem:o=[]})=>{const n=document.querySelector(e),r=document.createElement("div"),s={loadText:"images/preloader.gif",errorText:"Error...",successText:"Success"};try{if(!n)throw new Error("Ошибка нет формы");n.addEventListener("submit",(e=>{e.preventDefault(),r.insertAdjacentHTML("afterbegin",`<img src=${s.loadText} alt="preloader"></img>`),(()=>{const e=n.querySelectorAll("input"),a=new FormData(n),l={},c=((e,t)=>{const o=[];return e.forEach((e=>{if(t.hasOwnProperty(e.name)){const n={};n[t[e.name](e)]=e.name,o.push(n)}})),console.log(o),o})(e,t);if(n.append(r),a.forEach(((e,t)=>{l[e]=t})),o.forEach((e=>{const t=document.getElementById(e.id);"block"===e.type?l[e.id]=t.textContent:"input"===e.type&&(l[e.id]=t.value)})),c.some((e=>e.hasOwnProperty(!0)))){const e=c.filter((e=>e.hasOwnProperty(!0)));r.innerHTML="",e.forEach((e=>{r.insertAdjacentHTML("afterbegin",` Ошибка ввода данных в input ${e[!0]}`),setTimeout((()=>{r.innerHTML=""}),2e3)}))}else((e,t,o,{errorText:n,successText:r})=>{fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((()=>{setTimeout((()=>{o.textContent=r}),1e3)})).then((()=>{setTimeout((()=>{o.textContent=""}),2e3)})).catch((e=>o.textContent=`${n}:${e.message}`))})("https://jsonplaceholder.typicode.com/posts",l,r,s);e.forEach((e=>{e.value=""}))})()}))}catch(e){console.log(e.message)}};(e=>{const t=document.getElementById("timer-hours"),o=document.getElementById("timer-minutes"),n=document.getElementById("timer-seconds"),r=document.getElementById("timer"),s=document.createElement("span"),a=document.createElement("span");a.innerText=":",s.id="timer-days",r.insertAdjacentElement("afterbegin",a),r.insertAdjacentElement("afterbegin",s);const l=()=>{let t=(new Date(e).getTime()-(new Date).getTime())/1e3;return{timeRemaining:t,days:Math.floor(t/60/60/24),hours:Math.floor(t/60/60)%24,minutes:Math.floor(t/60)%60,seconds:Math.floor(t%60)}},c=(e,t)=>{e<=0?t.innerText="00":t.textContent=(e=>e>9?e:`0${e}`)(e)},i=()=>{let e=l();c(e.days,s),c(e.hours,t),c(e.minutes,o),c(e.seconds,n),console.log("new function")};(()=>{let e=l(),t=setInterval(i,1e3);e.timeRemaining<0&&(clearInterval(t),i())})()})("30 may 2023"),(()=>{const e=document.querySelector("menu"),t=document.querySelector("main"),o=()=>{e.classList.toggle("active-menu")};t.addEventListener("click",(t=>{const r=t.target;e.classList.contains("active-menu")&&o(),r.closest(".menu")&&o(),r.closest("a")&&(t.preventDefault(),n(r.parentElement,{behavior:"smooth"}))})),e.addEventListener("click",(t=>{t.preventDefault();const r=t.target;r.closest(".active-menu")&&r!==e&&(!r.classList.contains("close-btn")&&r.hasAttribute("href")&&(n(r,{behavior:"smooth"}),o()),r.classList.contains("close-btn")&&o())}))})(),(()=>{const t=document.querySelectorAll(".popup-btn"),o=document.querySelector(".popup"),n=window.innerWidth;t.forEach((t=>{t.addEventListener("click",(()=>{n>768?(o.style.display="block",e({duration:1500,timing:e=>-Math.pow((11-11*e)/4,2)+Math.pow(1,2),draw(e){document.querySelector(".popup-content").style.cssText=`left:${50*e+"%"};opacity:${e};`}})):o.style.display="block"}))})),o.addEventListener("click",(t=>{const r=t.target;t.target.closest(".popup-content")&&!r.classList.contains("popup-close")||(n>768?(e({duration:2e3,timing:e=>e,draw(e){document.querySelector(".popup-content").style.cssText=`left:${50-50*e+"%"};opacity:${1-e}`}}),setTimeout((()=>{o.style.display="none"}),2e3)):o.style.display="none")}))})(),((o=100)=>{const n=document.querySelector(".calc-block"),r=n.querySelector(".calc-type"),s=n.querySelector(".calc-square"),a=n.querySelector(".calc-count"),l=n.querySelector(".calc-day"),c=n.querySelectorAll("input.calc-item"),i=n.querySelector("#total");c.forEach((e=>{e.addEventListener("input",(o=>{o.preventDefault(),t.isNumber(e)}))})),n.addEventListener("input",(t=>{const n=t.target;n!==r&&n!==s&&n!==a&&n!==l||(()=>{const t=+r.options[r.selectedIndex].value,n=+s.value;let c=0,u=1,d=1;a.value>1&&(u+=+a.value/10),l.value&&l.value<5?d=2:l.value&&l.value<10&&(d=1.5),c=r.value&&s.value&&a.value&&l.value?o*t*n*u*d:0,e({duration:1500,timing:e=>e,draw(e){i.textContent=Math.round(e*c)}})})()}))})(100),s({formId:"#form1",someElem:[{type:"block",id:"total"}]}),s({formId:"#form3",someElem:[{type:"block",id:"total"}]}),s({formId:"#form2",someElem:[{type:"input",id:"form2-message"}]}),(()=>{const e=document.querySelectorAll(".service-tab"),t=document.querySelector(".service-header"),o=document.querySelectorAll(".service-header-tab");t.addEventListener("click",(t=>{const n=t.target;if(n.closest(".service-header-tab")){const t=n.closest(".service-header-tab");o.forEach(((o,n)=>{o===t?(o.classList.add("active"),e[n].classList.remove("d-none")):(e[n].classList.add("d-none"),o.classList.remove("active"))}))}}))})(),((e,t)=>{(()=>{const e=document.querySelector(".portfolio-dots"),t=document.querySelectorAll(".portfolio-item"),o=(e,t)=>{e.classList.add(t)};var n;n=e,t.forEach(((e,t)=>{const r=document.createElement("li");0===t?(o(r,"dot"),o(r,"dot-active")):o(r,"dot"),n.append(r)}))})();const o=document.querySelector(e),n=o.querySelectorAll(t),r=o.querySelectorAll(".dot"),s="portfolio-item-active",a="dot-active";let l,c=0;const i=(e,t,o)=>{e[t].classList.remove(o)},u=(e,t,o)=>{e[t].classList.add(o)},d=(e=1500)=>{l=setInterval(m,e)},m=()=>{i(n,c,s),i(r,c,a),c++,c>=n.length&&(c=0),u(n,c,s),u(r,c,a)};if(null===o||"undefined"===o||null===n||"undefined"===n||0===n.length)return console.log(o),void console.log(n);o.addEventListener("click",(e=>{e.preventDefault();const t=e.target;t.matches(".dot,.portfolio-btn")&&(i(n,c,s),i(r,c,a),t.matches("#arrow-right")?c++:t.matches("#arrow-left")?c--:t.classList.contains("dot")&&r.forEach(((e,o)=>{t===e&&(c=o)})),c>=n.length&&(c=0),c<0&&(c=n.length-1),u(n,c,s),u(r,c,a))})),o.addEventListener("mouseenter",(e=>{e.target.matches(".dot,.portfolio-btn")&&clearInterval(l)}),!0),o.addEventListener("mouseleave",(e=>{e.target.matches(".dot,.portfolio-btn")&&d(2e3)}),!0),d(2e3)})(".portfolio-content",".portfolio-item")})();